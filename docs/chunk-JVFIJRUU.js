import{a as St,c as de,d as Tt,f as We,p as _e}from"./chunk-XOBIZ26G.js";import{d as xt}from"./chunk-WSIDE3XU.js";import{$ as it,$a as mt,A as qe,Aa as u,Ba as P,Bb as bt,Ca as l,Da as s,E as B,Ea as D,Eb as _t,F as ce,Fa as ue,Fb as yt,Ga as ve,H as ae,Ha as at,Hb as Ct,I as T,Ia as ot,Ja as se,Jb as Fe,K as G,Ka as H,Kb as A,L as U,Lb as x,Ma as W,Mb as S,N as Je,Na as c,O as Ze,Oa as Ae,P as L,Pa as rt,Q as Xe,Qa as le,R as fe,Ra as me,S as F,Sa as st,U as et,Ua as K,V as tt,W as ge,Wa as r,X as oe,Xa as f,Ya as E,Za as $,_a as lt,a as Ue,aa as J,ab as dt,b as Re,ba as o,bb as Be,cb as be,db as pt,e as je,eb as ct,fa as nt,fb as m,gb as d,i as $e,ja as v,k as ne,ka as C,l as Ve,la as he,ma as R,mb as Le,na as Z,oa as X,pa as j,pb as ft,r as q,rb as gt,sa as re,sb as ht,t as ze,ta as b,tb as ut,ua as _,ub as vt,v as Ye,va as Q,wa as N,x as Qe,xa as O,y as Ke,ya as y,za as h}from"./chunk-FH27CVOI.js";var Pt={production:!0,apiUrl:"https://tmw2p.somee.com"};var I=class t{constructor(n,e,i,a){this.http=n;this.cookie=e;this.transloco=i;this.datePipe=a;this.apiUrl=Pt.apiUrl,this.transloco.langChanges$.subscribe(p=>{this.locale=p})}steamController="/steam/";geminiController="/gemini/";apiUrl;locale;humiliateMyLibrary(n){return this.http.post(`${this.apiUrl+this.geminiController}humiliate-my-library`,n,{responseType:"text"})}tellMeWhatToPlay(n,e){return this.http.post(`${this.apiUrl+this.geminiController}tell-me-what-to-play`,{lastTwoWeeks:n,allGames:e})}isValidDateString(n){return!(n.split("-").length<3)}tellMeWhatIsUpcoming(n,e){return this.http.post(`${this.apiUrl+this.geminiController}tell-me-what-is-upcoming`,{lastTwoWeeks:n,allGames:e}).pipe(ne(i=>i.map(a=>{let p=this.isValidDateString(a.releaseDate);return Re(Ue({},a),{releaseDate:p?this.datePipe.transform(a.releaseDate,"shortDate",void 0,this.locale):a.releaseDate})})))}getUserId(n){return(this.cookie.get(n)?$e(JSON.parse(this.cookie.get(n))):this.http.get(`${this.apiUrl+this.steamController}steam-user-id/${n}`).pipe(qe(i=>this.cookie.set(n,JSON.stringify(i),{expires:1,sameSite:"Strict",secure:!0})))).pipe(ne(i=>i?.response?.steamid||null))}playerSummary(n){return this.http.get(`${this.apiUrl+this.steamController}player-summary/${n}`).pipe(ne(e=>e?.response?.players?.[0]||null))}steamOwnedGames(n){return this.http.get(`${this.apiUrl+this.steamController}owned-games/${n}`).pipe(ne(e=>e?.response.games||null))}static \u0275fac=function(e){return new(e||t)(ae(bt),ae(St),ae(A),ae(ut))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Mt=(()=>{class t{constructor(){this.animation=!0}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var wt=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=he({type:t})}static{this.\u0275inj=ce({})}}return t})();var Ft=["ngbNavOutlet",""],Wt=t=>({$implicit:t});function Gt(t,n){}function Ut(t,n){if(t&1&&(h(0,"div",0),j(1,Gt,0,0,"ng-template",1),u()),t&2){let e=c().$implicit,i=c();y("item",e)("nav",i.nav)("role",i.paneRole),o(),y("ngTemplateOutlet",(e.contentTpl==null?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",pt(5,Wt,e.active||i.isPanelTransitioning(e)))}}function Rt(t,n){if(t&1&&b(0,Ut,2,7,"div",0),t&2){let e=n.$implicit,i=c();_(e.isPanelInDom()||i.isPanelTransitioning(e)?0:-1)}}var jt=(()=>{class t{constructor(){this._ngbConfig=T(Mt),this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),It=t=>de(t)&&t!=="",$t=0,Ge=(()=>{class t{constructor(){this.templateRef=T(nt)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=R({type:t,selectors:[["ng-template","ngbNavContent",""]]})}}return t})(),Nt=(()=>{class t{constructor(e){this.role=e,this.nav=T(pe)}static{this.\u0275fac=function(i){return new(i||t)(ge("role"))}}static{this.\u0275dir=R({type:t,selectors:[["","ngbNavItem","",5,"ng-container"]],hostVars:1,hostBindings:function(i,a){i&2&&re("role",a.role?a.role:a.nav.roles?"presentation":void 0)}})}}return t})(),Ce=(()=>{class t{constructor(){this._nav=T(pe),this._nativeElement=T(oe).nativeElement,this.disabled=!1,this.shown=new L,this.hidden=new L}ngOnInit(){de(this.domId)||(this.domId=`ngb-nav-${$t++}`)}get active(){return this._nav.activeId===this.id}get id(){return It(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(de(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}isNgContainer(){return this._nativeElement.nodeType===Node.COMMENT_NODE}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=R({type:t,selectors:[["","ngbNavItem",""]],contentQueries:function(i,a,p){if(i&1&&Ae(p,Ge,4),i&2){let g;le(g=me())&&(a.contentTpl=g.first)}},hostAttrs:[1,"nav-item"],inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:[0,"ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"]})}}return t})(),pe=(()=>{class t{constructor(e){this.role=e,this._config=T(jt),this._cd=T(Le),this._document=T(Je),this._nativeElement=T(oe).nativeElement,this.destroyRef=T(Ze),this._navigatingWithKeyboard=!1,this.activeIdChange=new L,this.animation=this._config.animation,this.destroyOnHide=this._config.destroyOnHide,this.orientation=this._config.orientation,this.roles=this._config.roles,this.keyboard=this._config.keyboard,this.shown=new L,this.hidden=new L,this.navItemChange$=new je,this.navChange=new L}click(e){e.disabled||this._updateActiveId(e.id)}onFocusout({relatedTarget:e}){this._nativeElement.contains(e)||(this._navigatingWithKeyboard=!1)}onKeyDown(e){if(this.roles!=="tablist"||!this.keyboard)return;let i=this.links.filter(g=>!g.navItem.disabled),{length:a}=i,p=-1;if(i.forEach((g,ie)=>{g.nativeElement===this._document.activeElement&&(p=ie)}),a){switch(e.key){case"ArrowUp":case"ArrowLeft":p=(p-1+a)%a;break;case"ArrowRight":case"ArrowDown":p=(p+1)%a;break;case"Home":p=0;break;case"End":p=a-1;break}this.keyboard==="changeWithArrows"&&this.select(i[p].navItem.id),i[p].nativeElement.focus(),this._navigatingWithKeyboard=!0,e.preventDefault()}}select(e){this._updateActiveId(e,!1)}ngAfterContentInit(){if(!de(this.activeId)){let e=this.items.first?this.items.first.id:null;It(e)&&(this._updateActiveId(e,!1),this._cd.detectChanges())}this.items.changes.pipe(Fe(this.destroyRef)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:e}){e&&!e.firstChange&&this._notifyItemChanged(e.currentValue)}_updateActiveId(e,i=!0){if(this.activeId!==e){let a=!1;i&&this.navChange.emit({activeId:this.activeId,nextId:e,preventDefault:()=>{a=!0}}),a||(this.activeId=e,this.activeIdChange.emit(e),this._notifyItemChanged(e))}}_notifyItemChanged(e){this.navItemChange$.next(this._getItemById(e))}_getItemById(e){return this.items&&this.items.find(i=>i.id===e)||null}static{this.\u0275fac=function(i){return new(i||t)(ge("role"))}}static{this.\u0275dir=R({type:t,selectors:[["","ngbNav",""]],contentQueries:function(i,a,p){if(i&1&&Ae(p,Ce,4)(p,xe,5),i&2){let g;le(g=me())&&(a.items=g),le(g=me())&&(a.links=g)}},hostAttrs:[1,"nav"],hostVars:4,hostBindings:function(i,a){i&1&&W("keydown.arrowLeft",function(g){return a.onKeyDown(g)})("keydown.arrowRight",function(g){return a.onKeyDown(g)})("keydown.arrowDown",function(g){return a.onKeyDown(g)})("keydown.arrowUp",function(g){return a.onKeyDown(g)})("keydown.Home",function(g){return a.onKeyDown(g)})("keydown.End",function(g){return a.onKeyDown(g)})("focusout",function(g){return a.onFocusout(g)}),i&2&&(re("aria-orientation",a.orientation==="vertical"&&a.roles==="tablist"?"vertical":void 0)("role",a.role?a.role:a.roles?"tablist":void 0),K("flex-column",a.orientation==="vertical"))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],features:[et]})}}return t})(),xe=(()=>{class t{constructor(e){this.role=e,this.navItem=T(Ce),this.nav=T(pe),this.nativeElement=T(oe).nativeElement}get tabindex(){return this.nav.keyboard===!1?this.navItem.disabled?-1:void 0:this.nav._navigatingWithKeyboard||this.navItem.disabled||!this.navItem.active?-1:void 0}static{this.\u0275fac=function(i){return new(i||t)(ge("role"))}}static{this.\u0275dir=R({type:t,selectors:[["","ngbNavLink",""]],hostAttrs:[1,"nav-link"],hostVars:12,hostBindings:function(i,a){i&2&&(H("id",a.navItem.domId),re("role",a.role?a.role:a.nav.roles?"tab":void 0)("tabindex",a.tabindex)("aria-controls",a.navItem.isPanelInDom()?a.navItem.panelDomId:null)("aria-selected",a.navItem.active)("aria-disabled",a.navItem.disabled),K("nav-item",a.navItem.isNgContainer())("active",a.navItem.active)("disabled",a.navItem.disabled))}})}}return t})(),Ot=(()=>{class t extends xe{static{this.\u0275fac=(()=>{let e;return function(a){return(e||(e=tt(t)))(a||t)}})()}static{this.\u0275dir=R({type:t,selectors:[["button","ngbNavLink",""]],hostAttrs:["type","button"],hostVars:1,hostBindings:function(i,a){i&1&&W("click",function(){return a.nav.click(a.navItem)}),i&2&&H("disabled",a.navItem.disabled)},features:[X]})}}return t})();var Vt=({classList:t})=>(t.remove("show"),()=>t.remove("active")),zt=(t,n)=>{n&&Tt(t),t.classList.add("show")},Et=(()=>{class t{constructor(){this.nativeElement=T(oe).nativeElement}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=R({type:t,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(i,a){i&2&&(H("id",a.item.panelDomId),re("role",a.role?a.role:a.nav.roles?"tabpanel":void 0)("aria-labelledby",a.item.domId),K("fade",a.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"}})}}return t})(),kt=(()=>{class t{constructor(){this._cd=T(Le),this._ngZone=T(Xe),this._activePane=null}isPanelTransitioning(e){return this._activePane?.item===e}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(Fe(this.nav.destroyRef),Ke(this._activePane?.item||null),ze(),Qe(1)).subscribe(e=>{let i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?We(this._ngZone,this._activePane.nativeElement,Vt,i).subscribe(()=>{let a=this._activePane?.item;this._activePane=this._getPaneForItem(e),this._cd.markForCheck(),this._activePane&&(this._activePane.nativeElement.classList.add("active"),We(this._ngZone,this._activePane.nativeElement,zt,i).subscribe(()=>{e&&(e.shown.emit(),this.nav.shown.emit(e.id))})),a&&(a.hidden.emit(),this.nav.hidden.emit(a.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.nativeElement.classList.add("show","active")}_getPaneForItem(e){return this._panes&&this._panes.find(i=>i.item===e)||null}_getActivePane(){return this._panes&&this._panes.find(e=>e.item.active)||null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=C({type:t,selectors:[["","ngbNavOutlet",""]],viewQuery:function(i,a){if(i&1&&rt(Et,5),i&2){let p;le(p=me())&&(a._panes=p)}},hostAttrs:[1,"tab-content"],inputs:{paneRole:"paneRole",nav:[0,"ngbNavOutlet","nav"]},attrs:Ft,decls:2,vars:0,consts:[["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,a){i&1&&N(0,Rt,1,1,null,null,Q),i&2&&O(a.nav.items)},dependencies:[Et,gt],encapsulation:2,changeDetection:0})}}return t})();var Dt=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=he({type:t})}static{this.\u0275inj=ce({})}}return t})();var V=class{static filter=n=>n.playtime_2weeks!=null&&n.playtime_2weeks>0};var z=class t{transform(n){let e=n/60;return e>=10?Math.round(e):Math.round(e*10)/10}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=Z({name:"minutesToHours",type:t,pure:!0})};function Yt(t,n){if(t&1&&(h(0,"div",0),P(1,"canvas",2),u()),t&2){let e=c();o(),y("data",e.pieChartData)("type",e.pieChartType)("options",e.pieChartOptions)}}function Qt(t,n){t&1&&(h(0,"div",1)(1,"p"),r(2),m(3,"transloco"),u()()),t&2&&(o(2),f(d(3,1,"common.noData")))}var Se=class t{constructor(n){this.translationService=n}data;pieChartData={labels:[],datasets:[{data:[]}]};pieChartType="pie";pieChartOptions={plugins:{legend:{display:!1}},responsive:!1};ngOnInit(){let n=this.translationService.translate("profile.chartsTab.allTime.playTimeHours");setTimeout(()=>{this.data.length>0&&(this.pieChartData={labels:this.data.map(e=>Array.isArray(e.name)?e.name:typeof e.name=="string"&&e.name.includes(",")?e.name.split(",").map(i=>i.trim()):e.name),datasets:[{data:this.data.map(e=>e.value),label:n}]})},1e3)}static \u0275fac=function(e){return new(e||t)(v(A))};static \u0275cmp=C({type:t,selectors:[["app-all-time"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"col-12","chart"],[1,"no-games-message"],["baseChart","",3,"data","type","options"]],template:function(e,i){e&1&&b(0,Yt,2,3,"div",0)(1,Qt,4,3,"div",1),e&2&&_(i.data&&i.data.length?0:1)},dependencies:[_e,S,x],encapsulation:2})};function Kt(t,n){if(t&1&&(h(0,"div",0),P(1,"canvas",2),u()),t&2){let e=c();o(),y("data",e.pieChartData)("type",e.pieChartType)("options",e.pieChartOptions)}}function qt(t,n){t&1&&(h(0,"div",1)(1,"p"),r(2),m(3,"transloco"),u()()),t&2&&(o(2),f(d(3,1,"common.noData")))}var Te=class t{constructor(n){this.translationService=n}data;pieChartData={labels:[],datasets:[{data:[]}]};pieChartType="pie";pieChartOptions={plugins:{legend:{display:!1}},responsive:!1};ngOnInit(){let n=this.translationService.translate("profile.chartsTab.lastTwoWeeks.playTimeHours");setTimeout(()=>{this.data.length>0&&(this.pieChartData={labels:this.data.map(e=>Array.isArray(e.name)?e.name:typeof e.name=="string"&&e.name.includes(",")?e.name.split(",").map(i=>i.trim()):e.name),datasets:[{data:this.data.map(e=>e.value),label:n}]})},1e3)}get hasDataWithValue(){return this.data&&this.data.length>0&&this.data.some(n=>n.value>0)}static \u0275fac=function(e){return new(e||t)(v(A))};static \u0275cmp=C({type:t,selectors:[["app-last-two-weeks"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"col-12","chart"],[1,"no-games-message"],["baseChart","",3,"data","type","options"]],template:function(e,i){e&1&&b(0,Kt,2,3,"div",0)(1,qt,4,3,"div",1),e&2&&_(i.hasDataWithValue?0:1)},dependencies:[_e,S,x],encapsulation:2})};var ee=class{constructor(n,e){this.sharedService=n;this.signalService=e;this.signToEffects()}data=[];loading=!1;signToEffects(){F(()=>{let n=this.signalService.allGamesSignal(),e=n.filter(V.filter).map(a=>a.name),i=n.map(a=>a.name);(e.length>0||i.length>0)&&(this.loading=!0,this.callService(e,i).pipe(q(1),Ye(()=>this.loading=!1)).subscribe(a=>this.data=a))})}};var w=class t{allGamesSignal=fe([]);ownedGamesSignal=fe([]);playerSummarySignal=fe({});constructor(){}static \u0275fac=function(e){return new(e||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Jt=(t,n)=>n.name;function Zt(t,n){if(t&1&&(l(0,"span",9),r(1),s()),t&2){let e=n.$implicit;o(),f(e)}}function Xt(t,n){if(t&1&&(l(0,"span",11),r(1),m(2,"transloco"),s()),t&2){let e=c(3);o(),E(" ",d(2,1,e.translationPrefix+"wildcard"))}}function ei(t,n){if(t&1&&(l(0,"div",7)(1,"div",8),N(2,Zt,2,1,"span",9,Q),s(),l(4,"h2",10),r(5),b(6,Xt,3,3,"span",11),s(),l(7,"p",12),r(8),m(9,"transloco"),l(10,"strong"),r(11),s()(),l(12,"div",13)(13,"p")(14,"span",14),r(15),m(16,"transloco"),s(),r(17),s(),l(18,"p")(19,"span",14),r(20),m(21,"transloco"),s(),r(22),s(),l(23,"p",15),r(24),s()()()),t&2){let e=n.$implicit,i=c(2);K("wildcard",e.isWildcard),o(2),O(e.genres),o(3),$(" #",e.id,". ",e.name," "),o(),_(e.isWildcard?6:-1),o(2),f(d(9,12,i.translationPrefix+"forfansOf")),o(3),f(e.referenceGame),o(4),f(d(16,14,i.translationPrefix+"pitch")),o(2),E(" ",e.pitch),o(3),f(d(21,16,i.translationPrefix+"why")),o(2),E(" ",e.why),o(2),f(e.score)}}function ti(t,n){if(t&1&&(l(0,"div",3),N(1,ei,25,18,"div",6,Jt),s()),t&2){let e=c();o(),O(e.TMW2Play)}}function ii(t,n){if(t&1&&(l(0,"div",4)(1,"h2"),r(2),m(3,"transloco"),s(),l(4,"p"),r(5),m(6,"transloco"),s(),l(7,"p"),r(8),m(9,"transloco"),s(),l(10,"p"),r(11),m(12,"transloco"),s()()),t&2){let e=c();o(2),f(d(3,4,e.translationPrefix+"noRecommendationsTitle")),o(3),f(d(6,6,e.translationPrefix+"noRecommendationsLabel1")),o(3),f(d(9,8,"error.sorryForThat")),o(3),f(d(12,10,"error.happyGaming"))}}function ni(t,n){t&1&&(l(0,"div",5),D(1,"div",16),s())}var Pe=class t extends ee{translationPrefix="profile.chartsTab.tellMeWhatToPlay.";constructor(n,e){super(n,e)}callService(n,e){return this.sharedService.tellMeWhatToPlay(n,e)}get TMW2Play(){return this.data}static \u0275fac=function(e){return new(e||t)(v(I),v(w))};static \u0275cmp=C({type:t,selectors:[["app-tell-me-what-to-play"]],features:[X],decls:10,vars:4,consts:[[1,"recommendations-container"],[1,"hype-header"],[1,"glitch-text"],[1,"game-grid"],[1,"no-recommendations"],[1,"loading-spinner"],[1,"game-card",3,"wildcard"],[1,"game-card"],[1,"genre-tags"],[1,"tag"],[1,"game-title"],[1,"wildcard-badge"],[1,"reference-game"],[1,"game-details"],[1,"label"],[1,"score"],["role","status",1,"spinner-border"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"h1",1),r(2," \u{1F3AE} "),l(3,"span",2),r(4),m(5,"transloco"),s(),r(6," \u{1F47E} "),s(),b(7,ti,3,0,"div",3)(8,ii,13,12,"div",4)(9,ni,2,0,"div",5),s()),e&2&&(o(4),f(d(5,2,i.translationPrefix+"gameRecommendations")),o(3),_(!i.loading&&i.TMW2Play&&i.TMW2Play.length>0?7:i.loading?9:8))},dependencies:[S,x],encapsulation:2})};function ai(t,n){if(t&1&&D(0,"div",10),t&2){let e=c();H("innerHTML",e.humiliationHtml,it)}}function oi(t,n){if(t&1&&(l(0,"div",11)(1,"h2"),r(2),m(3,"transloco"),s()()),t&2){let e=c();o(2),f(d(3,1,e.translationPrefix+"humilationFailed"))}}function ri(t,n){t&1&&(l(0,"div",12),D(1,"div",13),s())}var Me=class t{constructor(n,e,i,a){this.sharedService=n;this.signalService=e;this.sanitizer=i;this.minutesToHoursPipe=a;this.signToEffects()}humiliationText="Humuliation in progress...";humiliationHtml="";loading=!1;translationPrefix="profile.chartsTab.humiliateMyLibrary.";signToEffects(){F(()=>{let n=this.signalService.allGamesSignal().filter(V.filter),e=this.signalService.allGamesSignal();(n.length>0||e.length>0)&&(this.loading=!0,this.sharedService.humiliateMyLibrary({lastTwoWeeks:n.map(i=>({game:i.name,time:this.minutesToHoursPipe.transform(i.playtime_2weeks)})),allGames:e.map(i=>({game:i.name,time:this.minutesToHoursPipe.transform(i.playtime_forever)}))}).pipe(q(1)).subscribe(i=>{this.humiliationText=i,this.humiliationHtml=this.sanitizer.bypassSecurityTrustHtml(this.markdownToHtml(i)),this.loading=!1}))})}markdownToHtml(n){return n.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<strong>$1</strong>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^/,"<p>").replace(/$/,"</p>")}static \u0275fac=function(e){return new(e||t)(v(I),v(w),v(_t),v(z))};static \u0275cmp=C({type:t,selectors:[["app-humiliate-my-library"]],decls:21,vars:1,consts:[[1,"recommendations-container"],[1,"hype-header"],[1,"letter",2,"--letter-index","0"],[1,"letter",2,"--letter-index","1"],[1,"letter",2,"--letter-index","2"],[1,"letter",2,"--letter-index","3"],[1,"letter",2,"--letter-index","4"],[1,"letter",2,"--letter-index","5"],[1,"letter",2,"--letter-index","6"],[1,"letter",2,"--letter-index","7"],[1,"humiliation-text",3,"innerHTML"],[1,"no-recommendations"],[1,"loading-spinner"],["role","status",1,"spinner-border"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"h1",1)(2,"span",2),r(3,"F"),s(),l(4,"span",3),r(5,"A"),s(),l(6,"span",4),r(7,"T"),s(),l(8,"span",5),r(9,"A"),s(),l(10,"span",6),r(11,"L"),s(),l(12,"span",7),r(13,"I"),s(),l(14,"span",8),r(15,"T"),s(),l(16,"span",9),r(17,"Y"),s()(),b(18,ai,1,1,"div",10)(19,oi,4,3,"div",11)(20,ri,2,0,"div",12),s()),e&2&&(o(18),_(!i.loading&&i.humiliationText&&i.humiliationText.length>0?18:i.loading?20:19))},dependencies:[S,x],encapsulation:2})};var si=(t,n)=>n.id;function li(t,n){if(t&1&&(l(0,"span",8),r(1),s()),t&2){let e=n.$implicit;o(),f(e)}}function mi(t,n){if(t&1&&(l(0,"span",11),r(1),s()),t&2){let e=n.$implicit;o(),f(e)}}function di(t,n){if(t&1&&(l(0,"p",14),r(1),m(2,"transloco"),s()),t&2){let e=c().$implicit,i=c(2);o(),$("",d(2,2,i.translationPrefix+"anticipation"),": ",e.anticipationScore,"/10")}}function pi(t,n){if(t&1&&(l(0,"div",6)(1,"div",7),N(2,li,2,1,"span",8,Q),s(),l(4,"div",9),r(5),s(),l(6,"div",10),N(7,mi,2,1,"span",11,Q),s(),l(9,"div",12)(10,"p")(11,"span",13),r(12),m(13,"transloco"),s(),r(14),s(),l(15,"p"),r(16),s(),b(17,di,3,4,"p",14),s()()),t&2){let e=n.$implicit,i=c(2);o(2),O(e.genres),o(3),$(" #",e.id,". ",e.name," "),o(2),O(e.platforms),o(5),f(d(13,6,i.translationPrefix+"releaseDate")),o(2),E(" ",e.releaseDate," "),o(2),f(e.description),o(),_(e.anticipationScore?17:-1)}}function ci(t,n){if(t&1&&(l(0,"div",3),N(1,pi,18,8,"div",6,si),s()),t&2){let e=c();o(),O(e.upcomingGames)}}function fi(t,n){if(t&1&&(l(0,"div",4)(1,"h2"),r(2),m(3,"transloco"),s(),l(4,"p"),r(5),m(6,"transloco"),s(),l(7,"p"),r(8),m(9,"transloco"),s()()),t&2){let e=c();o(2),f(d(3,3,e.translationPrefix+"noUpcomingTitle")),o(3),f(d(6,5,"error.sorryForThat")),o(3),f(d(9,7,"error.happyGaming"))}}function gi(t,n){t&1&&(l(0,"div",5),D(1,"div",15),s())}var we=class t extends ee{translationPrefix="profile.chartsTab.tellMeWhatIsUpcoming.";locale;constructor(n,e){super(n,e)}callService(n,e){return this.sharedService.tellMeWhatIsUpcoming(n,e)}get upcomingGames(){return this.data}static \u0275fac=function(e){return new(e||t)(v(I),v(w))};static \u0275cmp=C({type:t,selectors:[["app-tell-me-what-is-upcoming"]],features:[X],decls:10,vars:4,consts:[[1,"recommendations-container"],[1,"hype-header"],[1,"glitch-text"],[1,"game-grid"],[1,"no-recommendations"],[1,"loading-spinner"],[1,"game-card"],[1,"genre-tags"],[1,"tag"],[1,"game-title"],[1,"platform-tags"],[1,"tag","platform"],[1,"game-details"],[1,"label"],[1,"score"],["role","status",1,"spinner-border"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"h1",1),r(2," \u{1F680} "),l(3,"span",2),r(4),m(5,"transloco"),s(),r(6," \u23F3 "),s(),b(7,ci,3,0,"div",3)(8,fi,10,9,"div",4)(9,gi,2,0,"div",5),s()),e&2&&(o(4),f(d(5,2,i.translationPrefix+"title")),o(3),_(!i.loading&&i.upcomingGames&&i.upcomingGames.length>0?7:i.loading?9:8))},dependencies:[S,x],encapsulation:2})};function hi(t,n){if(t&1&&P(0,"app-last-two-weeks",8),t&2){let e=c();y("data",e.twoWeeksData)}}function ui(t,n){if(t&1&&P(0,"app-all-time",8),t&2){let e=c();y("data",e.allTimeData)}}function vi(t,n){t&1&&(ue(0),P(1,"app-tell-me-what-to-play"),ve())}function bi(t,n){if(t&1&&b(0,vi,2,0,"ng-container"),t&2){let e=c();_(e.tmw2PlayLoaded?0:-1)}}function _i(t,n){t&1&&(ue(0),P(1,"app-humiliate-my-library"),ve())}function yi(t,n){if(t&1&&b(0,_i,2,0,"ng-container"),t&2){let e=c();_(e.humiliateMyLibLoaded?0:-1)}}function Ci(t,n){t&1&&(ue(0),P(1,"app-tell-me-what-is-upcoming"),ve())}function xi(t,n){if(t&1&&b(0,Ci,2,0,"ng-container"),t&2){let e=c();_(e.tellMeWhatIsUpcomingLoaded?0:-1)}}var Ee=class t{constructor(n,e){this.minutesToHoursPipe=n;this.signalService=e;this.signToChartEffects()}view=[700,400];active=1;twoWeeksData=[];allTimeData=[];gradient=!0;showLegend=!0;showLabels=!0;isDoughnut=!1;tmw2PlayLoaded=!1;humiliateMyLibLoaded=!1;tellMeWhatIsUpcomingLoaded=!1;translationPrefix="profile.chartsTab.";colorScheme={domain:["#5AA454","#A10A28","#C7B42C","#AAAAAA"]};signToChartEffects(){this.signTwoWeeksDataEffect(),this.signAllTimeDataEffect()}signAllTimeDataEffect(){F(()=>{this.allTimeData=this.signalService.allGamesSignal().filter(n=>n.playtime_forever!=null&&n.playtime_forever>0).map(n=>({name:n.name,value:this.minutesToHoursPipe.transform(n.playtime_forever)}))})}signTwoWeeksDataEffect(){F(()=>{this.twoWeeksData=this.signalService.allGamesSignal().filter(V.filter).map(n=>({name:n.name,value:this.minutesToHoursPipe.transform(n.playtime_2weeks)}))})}static \u0275fac=function(e){return new(e||t)(v(z),v(w))};static \u0275cmp=C({type:t,selectors:[["app-charts-tab"]],features:[be([z])],decls:33,vars:40,consts:[["nav","ngbNav"],["data-bs-theme","dark",1,"gradient-bg-dark","profile-header"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId","destroyOnHide"],[3,"ngbNavItem","destroyOnHide","title"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavLink","",3,"click"],[1,"mt-2",3,"ngbNavOutlet"],[3,"data"]],template:function(e,i){if(e&1){let a=se();h(0,"div",1)(1,"ul",2,0),dt("activeIdChange",function(g){return G(a),mt(i.active,g)||(i.active=g),U(g)}),h(3,"li",3),m(4,"transloco"),h(5,"button",4),r(6),m(7,"transloco"),u(),j(8,hi,1,1,"ng-template",5),u(),h(9,"li",3),m(10,"transloco"),h(11,"button",4),r(12),m(13,"transloco"),u(),j(14,ui,1,1,"ng-template",5),u(),h(15,"li",3),m(16,"transloco"),h(17,"button",6),W("click",function(){return G(a),U(i.tmw2PlayLoaded=!0)}),r(18,"TMW2Play"),u(),j(19,bi,1,1,"ng-template",5),u(),h(20,"li",3),m(21,"transloco"),h(22,"button",6),W("click",function(){return G(a),U(i.humiliateMyLibLoaded=!0)}),r(23),m(24,"transloco"),u(),j(25,yi,1,1,"ng-template",5),u(),h(26,"li",3),m(27,"transloco"),h(28,"button",6),W("click",function(){return G(a),U(i.tellMeWhatIsUpcomingLoaded=!0)}),r(29),m(30,"transloco"),u(),j(31,xi,1,1,"ng-template",5),u()(),P(32,"div",7),u()}if(e&2){let a=st(2);o(),lt("activeId",i.active),y("destroyOnHide",!1),o(2),y("ngbNavItem",1)("destroyOnHide",!1)("title",d(4,22,i.translationPrefix+"lastTwoWeeksLabel")),o(3),f(d(7,24,i.translationPrefix+"lastTwoWeeksLabel")),o(3),y("ngbNavItem",2)("destroyOnHide",!1)("title",d(10,26,i.translationPrefix+"allTimeLabel")),o(3),f(d(13,28,i.translationPrefix+"allTimeLabel")),o(3),y("ngbNavItem",3)("destroyOnHide",!1)("title",d(16,30,i.translationPrefix+"tellMeWhatToPlayLabel")),o(5),y("ngbNavItem",4)("destroyOnHide",!1)("title",d(21,32,i.translationPrefix+"humiliateMyLibrary.description")),o(3),f(d(24,34,i.translationPrefix+"humiliateMyLibrary.title")),o(3),y("ngbNavItem",5)("destroyOnHide",!1)("title",d(27,36,i.translationPrefix+"tellMeWhatIsUpcoming.description")),o(3),f(d(30,38,i.translationPrefix+"tellMeWhatIsUpcoming.title")),o(3),y("ngbNavOutlet",a)}},dependencies:[Dt,Ge,pe,Ce,Nt,Ot,xe,kt,wt,Te,Se,Pe,S,Me,we,x],styles:["[_nghost-%COMP%]     .chart{height:calc(40vh - 50px)}[_nghost-%COMP%]     .chart canvas{margin:auto}[_nghost-%COMP%]     .no-games-message{padding:1rem}@keyframes _ngcontent-%COMP%_melt{0%{transform:translateY(0) skewY(0);text-shadow:0 0 20px #00f7ff,0 0 40px #00f7ff;filter:blur(0px) brightness(1.2)}25%{transform:translateY(8px) skewY(2deg);text-shadow:0 5px 15px rgba(0,247,255,.8),0 10px 30px rgba(0,247,255,.6),0 15px 40px rgba(0,247,255,.4);filter:blur(.5px) brightness(1.1)}50%{transform:translateY(20px) skewY(4deg);text-shadow:0 10px 20px rgba(0,247,255,.8),0 20px 40px rgba(0,247,255,.6),0 30px 60px rgba(0,247,255,.4),0 40px 80px rgba(0,247,255,.2);filter:blur(1.5px) brightness(1);opacity:.9}75%{transform:translateY(35px) skewY(6deg);text-shadow:0 15px 25px rgba(0,247,255,.7),0 28px 50px rgba(0,247,255,.5),0 42px 80px rgba(0,247,255,.3),0 56px 100px rgba(0,247,255,.1);filter:blur(2.5px) brightness(.9);opacity:.7}to{transform:translateY(50px) skewY(8deg);text-shadow:0 20px 30px rgba(0,247,255,.6),0 35px 60px rgba(0,247,255,.4),0 50px 90px rgba(0,247,255,.2),0 70px 120px rgba(0,247,255,.08);filter:blur(4px) brightness(.8);opacity:.4}}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:0 0 10px #f50a0a}50%{text-shadow:0 0 15px #0f0cd3,0 0 20px #00f7ff}to{text-shadow:0 0 10px #00ff00}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}[_nghost-%COMP%]     .hype-header{text-align:center;font-size:2.5rem;margin-bottom:1rem;color:#fff;text-shadow:0 0 10px #00f7ff,0 0 20px #00f7ff;font-weight:700;display:inline-block;width:100%}[_nghost-%COMP%]     .glitch-text{animation:_ngcontent-%COMP%_glitch 1s infinite}[_nghost-%COMP%]     .letter{display:inline-block;animation:_ngcontent-%COMP%_melt 5s ease-in infinite;animation-delay:calc(var(--letter-index) * .15s)}[_nghost-%COMP%]     .recommendations-container{padding-left:1rem;padding-right:1rem;margin-bottom:1rem}[_nghost-%COMP%]     .game-card, [_nghost-%COMP%]     .humiliation-text{background:#14141ecc;border-radius:12px;padding:1.5rem;border-left:4px solid #00f7ff;transition:transform .3s;color:#e0e0e0;font-size:.95rem;line-height:1.8}[_nghost-%COMP%]     .game-card:hover, [_nghost-%COMP%]     .humiliation-text:hover{transform:translateY(-5px);box-shadow:0 5px 15px #00f7ff4d}[_nghost-%COMP%]     .game-card p, [_nghost-%COMP%]     .humiliation-text p{margin:1rem 0}[_nghost-%COMP%]     .game-card p:first-child, [_nghost-%COMP%]     .humiliation-text p:first-child{margin-top:0}[_nghost-%COMP%]     .game-card p:last-child, [_nghost-%COMP%]     .humiliation-text p:last-child{margin-bottom:0}[_nghost-%COMP%]     .game-card strong, [_nghost-%COMP%]     .humiliation-text strong{color:#ff6b6b;font-weight:700}[_nghost-%COMP%]     .game-card em, [_nghost-%COMP%]     .humiliation-text em{color:#00f7ff;font-style:italic}[_nghost-%COMP%]     .game-card::-webkit-scrollbar, [_nghost-%COMP%]     .humiliation-text::-webkit-scrollbar{width:8px}[_nghost-%COMP%]     .game-card::-webkit-scrollbar-track, [_nghost-%COMP%]     .humiliation-text::-webkit-scrollbar-track{background:#00f7ff1a;border-radius:4px}[_nghost-%COMP%]     .game-card::-webkit-scrollbar-thumb, [_nghost-%COMP%]     .humiliation-text::-webkit-scrollbar-thumb{background:#00f7ff;border-radius:4px}[_nghost-%COMP%]     .game-card::-webkit-scrollbar-thumb:hover, [_nghost-%COMP%]     .humiliation-text::-webkit-scrollbar-thumb:hover{background:#00f7ff}[_nghost-%COMP%]     .game-container{display:grid;gap:1rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));margin-bottom:1rem}[_nghost-%COMP%]     .game-card.wildcard{border-left-color:#ff00f7;background:#1e0a1ecc}[_nghost-%COMP%]     .genre-tags, [_nghost-%COMP%]     .platform-tags{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}[_nghost-%COMP%]     .genre-tags .platform, [_nghost-%COMP%]     .platform-tags .platform{background:#ff00f7;color:#fff}[_nghost-%COMP%]     .tag{background:#00f7ff;color:#000;padding:.3rem .6rem;border-radius:20px;font-size:.8rem;font-weight:700}[_nghost-%COMP%]     .game-grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}[_nghost-%COMP%]     .game-title{color:#fff;margin:.5rem 0;font-size:1.4rem}[_nghost-%COMP%]     .game-title .wildcard-badge{background:#ff00f7;color:#fff;padding:.2rem .6rem;border-radius:20px;font-size:.8rem;margin-left:.5rem}[_nghost-%COMP%]     .reference-game{color:#aaa;font-style:italic;margin-bottom:1rem}[_nghost-%COMP%]     .game-details p{margin:.5rem 0;color:#ddd}[_nghost-%COMP%]     .game-details .label{color:#00f7ff;font-weight:700}[_nghost-%COMP%]     .game-details .score{font-weight:700;color:#ff00f7;margin-top:.8rem}[_nghost-%COMP%]     .no-recommendations{padding:1rem}[_nghost-%COMP%]     .loading-spinner{display:flex;align-items:center;justify-content:center;min-height:250px}[_nghost-%COMP%]     .loading-spinner .spinner-border{border-width:3px;border-color:#00f7ff4d;border-right-color:#00f7ff;animation:_ngcontent-%COMP%_spin 1s linear infinite}[_nghost-%COMP%]     pre{background:#00f7ff0d;border-left:4px solid #00f7ff;border-radius:4px;padding:1.5rem;color:#e0e0e0;font-family:Courier New,monospace;font-size:.95rem;line-height:1.6;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word;max-height:500px;overflow-y:auto;margin:0;box-shadow:inset 0 2px 8px #0003}[_nghost-%COMP%]     pre::-webkit-scrollbar{width:8px}[_nghost-%COMP%]     pre::-webkit-scrollbar-track{background:#00f7ff1a;border-radius:4px}[_nghost-%COMP%]     pre::-webkit-scrollbar-thumb{background:#00f7ff;border-radius:4px}[_nghost-%COMP%]     pre::-webkit-scrollbar-thumb:hover{background:#00f7ff}"]})};var Ie=class t{constructor(n){this.translationService=n}transform(n){let e=this.translationService.translate("common.ago"),i=this.translationService.translate("common.justNow"),a=this.translationService.translate("common.neverPlayed");if(n<=0)return a;let p=Math.floor((Date.now()-n*1e3)/1e3),g={[this.translationService.translate("common.year")]:31536e3,[this.translationService.translate("common.month")]:2592e3,[this.translationService.translate("common.week")]:604800,[this.translationService.translate("common.day")]:86400,[this.translationService.translate("common.hour")]:3600,[this.translationService.translate("common.minute")]:60};for(let[ie,Bt]of Object.entries(g)){let De=Math.floor(p/Bt);if(De>=1){let He=ie;return De>1&&(ie===this.translationService.translate("common.month")?He=this.translationService.translate("common.months"):He=`${ie}s`),`${De} ${He} ${e}`}}return i}static \u0275fac=function(e){return new(e||t)(v(A,16))};static \u0275pipe=Z({name:"lastPlayed",type:t,pure:!0})};var Ne=class t{constructor(n){this.translationService=n}transform(n){let e=this.translationService.translate("common.hour")+"s",i=this.translationService.translate("common.minute")+"s",a=Math.floor(n/60),p=n%60;return`${a} ${e} ${p} ${i}`}static \u0275fac=function(e){return new(e||t)(v(A,16))};static \u0275pipe=Z({name:"playTime",type:t,pure:!0})};var Si=(t,n)=>({"pe-0 d-md-block":t,"d-none":n}),Ti=(t,n)=>n.appid;function Pi(t,n){if(t&1&&(h(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),P(4,"img",5),h(5,"div",6)(6,"h6",7),r(7),u(),h(8,"div",8)(9,"div"),r(10),m(11,"transloco"),m(12,"lastPlayed"),u(),h(13,"div"),r(14),m(15,"transloco"),m(16,"playTime"),u()()()()()()()),t&2){let e=n.$implicit,i=n.$index,a=c();y("ngClass",ct(16,Si,(i+1)%3===0,(i+1)%3===0)),o(4),y("src",a.getGameImageUrl(e),J)("alt",e.name),o(3),f(e.name),o(3),$("",d(11,8,a.translationPrefix+"lastPlayed")," ",d(12,10,e.rtime_last_played)),o(4),$("",d(15,12,a.translationPrefix+"totalPlaytime")," ",d(16,14,e.playtime_forever))}}var Oe=class t{ownedGames=[];translationPrefix="profile.ownedGames.";getGameImageUrl(n){return`https://media.steampowered.com/steamcommunity/public/images/apps/${n.appid}/${n.img_icon_url}.jpg`}constructor(n){F(()=>{this.ownedGames=n.ownedGamesSignal()})}static \u0275fac=function(e){return new(e||t)(v(w))};static \u0275cmp=C({type:t,selectors:[["app-owned-games"]],decls:3,vars:0,consts:[[1,"row","owned-games-container"],[1,"col-md-4","col-sm-12","mb-2","card-parent",3,"ngClass"],[1,"game-card","card","gradient-bg-dark","border-0"],[1,"card-body","p-2"],[1,"d-flex"],["width","64","height","64",1,"rounded",3,"src","alt"],[1,"flex-grow-1","ms-3"],[1,"mb-1","text-truncate"],[1,"small"]],template:function(e,i){e&1&&(h(0,"div",0),N(1,Pi,17,19,"div",1,Ti),u()),e&2&&(o(),O(i.ownedGames))},dependencies:[S,vt,ft,Ie,Ne,x],styles:[".card-parent[_ngcontent-%COMP%]{height:90px}.game-card[_ngcontent-%COMP%]{transition:transform .2s,box-shadow .2s;border:1px solid #2c3e50!important}.game-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #0000004d;border-color:#66c0f4!important}.loading-games[_ngcontent-%COMP%]{opacity:.7}.steam-btn[_ngcontent-%COMP%]{background-color:#5c7e10;font-weight:700}.steam-btn[_ngcontent-%COMP%]:hover{background-color:#6c8e20}"]})};function Mi(t,n){if(t&1&&(at(0),D(1,"img",10),m(2,"transloco"),m(3,"lowercase"),ot()),t&2){let e=c();o(),H("alt",Be(d(2,3,e.translationPrefix+"countryFlag")))("src","https://steamcommunity-a.akamaihd.net/public/images/countryflags/"+d(3,5,e.playerSummary.loccountrycode)+".gif",J)}}var ke=class t{switchNeverPlayed=!1;translationPrefix="profile.summaryHeader.";playerSummary;hideNeverPlayed=new L;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-summary-header"]],inputs:{playerSummary:"playerSummary"},outputs:{hideNeverPlayed:"hideNeverPlayed"},decls:19,vars:15,consts:[[1,"profile-header","gradient-bg-dark"],[1,"col","col-md-9","col-sm-12","text-center","py-3","m-auto"],[1,"row","align-items-center","m-2"],[1,"col","col-md-3","col-sm-6","text-center"],["priority","",1,"profile-pic","img-fluid","rounded-circle","mb-3",3,"src","alt"],[1,"col","col-md-9","col-sm-12"],[1,"display-5"],[1,"fs-4"],[1,"mb-3"],["target","_blank",1,"btn","btn-primary","btn-sm",3,"href"],["priority","",1,"country-flag",3,"src","alt"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"h6"),r(3),m(4,"transloco"),s()(),l(5,"div",2)(6,"div",3),D(7,"img",4),m(8,"transloco"),s(),l(9,"div",5)(10,"h2",6),r(11),l(12,"span",7),r(13),s(),b(14,Mi,4,7,"ng-container"),s(),l(15,"div",8)(16,"a",9),r(17),m(18,"transloco"),s()()()()()),e&2&&(o(3),f(d(4,9,i.translationPrefix+"welcomeMessage")),o(4),H("alt",Be(d(8,11,i.translationPrefix+"profilePicture")))("src",i.playerSummary.avatarfull,J),o(4),E(" ",i.playerSummary.personaname," "),o(2),E(" (",i.playerSummary.realname||i.playerSummary.personaname,")"),o(),_(i.playerSummary.loccountrycode?14:-1),o(2),H("href",i.playerSummary.profileurl,J),o(),E(" ",d(18,13,i.translationPrefix+"viewSteamProfile")," "))},dependencies:[xt,S,ht,x],styles:[".profile-pic[_ngcontent-%COMP%]{border:5px solid #66c0f4;box-shadow:0 0 15px #66c0f480}.country-flag[_ngcontent-%COMP%]{width:30px;height:20px;border-radius:2px;margin:.5rem .5rem 0}.status-icon[_ngcontent-%COMP%]{font-size:1.2rem;vertical-align:middle}"]})};function wi(t,n){if(t&1){let e=se();h(0,"div",0)(1,"div",3)(2,"app-summary-header",4),W("hideNeverPlayed",function(a){G(e);let p=c();return U(p.onHideNeverPlayed(a))}),u(),P(3,"app-charts-tab",5),u(),h(4,"div",3),P(5,"app-owned-games",6),u()()}if(t&2){let e=c();o(2),y("playerSummary",e.signalService.playerSummarySignal())}}function Ei(t,n){t&1&&(h(0,"div",1),P(1,"div",7),u())}function Ii(t,n){t&1&&(h(0,"div",2),r(1),m(2,"transloco"),u()),t&2&&(o(),E(" ",d(2,1,"profile.notPublic"),`
`))}var At=class t{constructor(n,e,i,a){this.ac=n;this.router=e;this.sharedService=i;this.signalService=a}steamUser=null;loading=!0;ngAfterViewInit(){this.steamUser=this.ac.snapshot.paramMap.get("steamUser");let n=this.ac.snapshot.queryParamMap.get("type");if(!this.steamUser){this.router.navigate(["Home"]);return}n==="id"?this.loadProfileById(this.steamUser):this.loadProfile(this.steamUser)}loadProfileById(n){this.loading=!0,this.loadProfileData(n)}loadProfile(n){this.loading=!0,this.sharedService.getUserId(n).pipe(q(1)).subscribe(e=>{this.loadProfileData(e)})}loadProfileData(n){return Ve([this.sharedService.playerSummary(n),this.sharedService.steamOwnedGames(n)]).subscribe(([e,i])=>{this.updateSignals(e,i),this.loading=!1})}updateSignals(n,e){this.signalService.allGamesSignal.set(e),this.signalService.playerSummarySignal.set(n),this.signalService.ownedGamesSignal.set(e)}onHideNeverPlayed(n){let e=n?this.signalService.allGamesSignal().filter(i=>i.playtime_forever>0):this.signalService.allGamesSignal();this.signalService.ownedGamesSignal.set(e)}static \u0275fac=function(e){return new(e||t)(v(yt),v(Ct),v(I),v(w))};static \u0275cmp=C({type:t,selectors:[["app-profile"]],features:[be([I])],decls:3,vars:1,consts:[[1,"py-2","tmw2p-container"],[1,"loading-spinner"],[1,"m-2","py-2","alert","alert-warning","text-center","tmw2p-container"],[1,"row"],[1,"col-md-6","col-sm-12","mb-3",3,"hideNeverPlayed","playerSummary"],[1,"col-md-6","col-sm-12","mb-3"],[1,"col-md-12","col-sm-12"],["role","status",1,"spinner-border"]],template:function(e,i){if(e&1&&b(0,wi,6,1,"div",0)(1,Ei,2,0,"div",1)(2,Ii,3,3,"div",2),e&2){let a;_(((a=i.signalService.playerSummarySignal())==null?null:a.communityvisibilitystate)===3&&!i.loading?0:i.loading?1:2)}},dependencies:[ke,Oe,Ee,S,x],styles:[".summary[_ngcontent-%COMP%]{margin-bottom:1.5rem}.tmw2p-container[_ngcontent-%COMP%]{overflow-y:overlay;overflow-x:hidden}"]})};export{At as ProfileComponent};
