import{a as vt,c as ae,d as bt,f as Ae,p as ue}from"./chunk-PUNDTTCH.js";import{d as ht}from"./chunk-4J77OAFT.js";import{$ as K,$a as ot,Aa as P,Ab as ft,Ba as d,Bb as ut,Ca as s,D as O,Da as B,Db as gt,E as le,Ea as Ne,Fa as Ie,G as Ee,Ga as Xe,Gb as He,H as x,Ha as et,Hb as F,Ia as ee,Ib as w,J as G,Ja as E,Jb as S,K as j,La as L,M as Ve,Ma as g,N as ze,Na as Oe,O as k,Oa as tt,P as Ye,Pa as te,Q as me,Qa as ie,R as D,Ra as it,T as Qe,Ta as z,U as Ke,V as de,Va as r,W as Z,Wa as v,Xa as N,Ya as ne,Za as nt,_ as Je,_a as at,aa as o,ab as ke,bb as fe,cb as rt,db as st,e as Fe,ea as qe,eb as l,fb as m,i as Re,ia as h,ja as y,k as se,ka as ce,kb as De,l as We,la as A,ma as J,na as Ze,nb as lt,oa as $,pb as mt,qb as dt,r as Q,ra as X,rb as ct,sa as _,t as Ge,ta as C,ua as pe,va as U,w as je,wa as V,x as $e,xa as b,xb as pt,ya as f,z as Ue,za as u}from"./chunk-TQPGIEFJ.js";var yt={production:!0,apiUrl:"https://tmw2p.somee.com"};var I=class t{constructor(n,e){this.http=n;this.cookie=e;this.apiUrl=yt.apiUrl}steamController="/steam/";geminiController="/gemini/";apiUrl;humiliateMyLibrary(n){return this.http.post(`${this.apiUrl+this.geminiController}humiliate-my-library`,n,{responseType:"text"})}tellMeWhatToPlay(n,e){return this.http.post(`${this.apiUrl+this.geminiController}tell-me-what-to-play`,{lastTwoWeeks:n,allGames:e})}getUserId(n){return(this.cookie.get(n)?Re(JSON.parse(this.cookie.get(n))):this.http.get(`${this.apiUrl+this.steamController}steam-user-id/${n}`).pipe(Ue(i=>this.cookie.set(n,JSON.stringify(i),{expires:1,sameSite:"Strict",secure:!0})))).pipe(se(i=>i?.response?.steamid||null))}playerSummary(n){return this.http.get(`${this.apiUrl+this.steamController}player-summary/${n}`).pipe(se(e=>e?.response?.players?.[0]||null))}steamOwnedGames(n){return this.http.get(`${this.apiUrl+this.steamController}owned-games/${n}`).pipe(se(e=>e?.response.games||null))}static \u0275fac=function(e){return new(e||t)(Ee(pt),Ee(vt))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var _t=(()=>{class t{constructor(){this.animation=!0}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ct=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=ce({type:t})}static{this.\u0275inj=le({})}}return t})();var Ot=["ngbNavOutlet",""],kt=t=>({$implicit:t});function Dt(t,n){}function Ht(t,n){if(t&1&&(f(0,"div",0),$(1,Dt,0,0,"ng-template",1),u()),t&2){let e=g().$implicit,i=g();b("item",e)("nav",i.nav)("role",i.paneRole),o(),b("ngTemplateOutlet",(e.contentTpl==null?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",rt(5,kt,e.active||i.isPanelTransitioning(e)))}}function At(t,n){if(t&1&&_(0,Ht,2,7,"div",0),t&2){let e=n.$implicit,i=g();C(e.isPanelInDom()||i.isPanelTransitioning(e)?0:-1)}}var Bt=(()=>{class t{constructor(){this._ngbConfig=x(_t),this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Pt=t=>ae(t)&&t!=="",Lt=0,Le=(()=>{class t{constructor(){this.templateRef=x(qe)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=A({type:t,selectors:[["ng-template","ngbNavContent",""]]})}}return t})(),wt=(()=>{class t{constructor(e){this.role=e,this.nav=x(oe)}static{this.\u0275fac=function(i){return new(i||t)(de("role"))}}static{this.\u0275dir=A({type:t,selectors:[["","ngbNavItem","",5,"ng-container"]],hostVars:1,hostBindings:function(i,a){i&2&&X("role",a.role?a.role:a.nav.roles?"presentation":void 0)}})}}return t})(),ge=(()=>{class t{constructor(){this._nav=x(oe),this._nativeElement=x(Z).nativeElement,this.disabled=!1,this.shown=new k,this.hidden=new k}ngOnInit(){ae(this.domId)||(this.domId=`ngb-nav-${Lt++}`)}get active(){return this._nav.activeId===this.id}get id(){return Pt(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(ae(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}isNgContainer(){return this._nativeElement.nodeType===Node.COMMENT_NODE}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=A({type:t,selectors:[["","ngbNavItem",""]],contentQueries:function(i,a,c){if(i&1&&Oe(c,Le,4),i&2){let p;te(p=ie())&&(a.contentTpl=p.first)}},hostAttrs:[1,"nav-item"],inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:[0,"ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"]})}}return t})(),oe=(()=>{class t{constructor(e){this.role=e,this._config=x(Bt),this._cd=x(De),this._document=x(Ve),this._nativeElement=x(Z).nativeElement,this.destroyRef=x(ze),this._navigatingWithKeyboard=!1,this.activeIdChange=new k,this.animation=this._config.animation,this.destroyOnHide=this._config.destroyOnHide,this.orientation=this._config.orientation,this.roles=this._config.roles,this.keyboard=this._config.keyboard,this.shown=new k,this.hidden=new k,this.navItemChange$=new Fe,this.navChange=new k}click(e){e.disabled||this._updateActiveId(e.id)}onFocusout({relatedTarget:e}){this._nativeElement.contains(e)||(this._navigatingWithKeyboard=!1)}onKeyDown(e){if(this.roles!=="tablist"||!this.keyboard)return;let i=this.links.filter(p=>!p.navItem.disabled),{length:a}=i,c=-1;if(i.forEach((p,q)=>{p.nativeElement===this._document.activeElement&&(c=q)}),a){switch(e.key){case"ArrowUp":case"ArrowLeft":c=(c-1+a)%a;break;case"ArrowRight":case"ArrowDown":c=(c+1)%a;break;case"Home":c=0;break;case"End":c=a-1;break}this.keyboard==="changeWithArrows"&&this.select(i[c].navItem.id),i[c].nativeElement.focus(),this._navigatingWithKeyboard=!0,e.preventDefault()}}select(e){this._updateActiveId(e,!1)}ngAfterContentInit(){if(!ae(this.activeId)){let e=this.items.first?this.items.first.id:null;Pt(e)&&(this._updateActiveId(e,!1),this._cd.detectChanges())}this.items.changes.pipe(He(this.destroyRef)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:e}){e&&!e.firstChange&&this._notifyItemChanged(e.currentValue)}_updateActiveId(e,i=!0){if(this.activeId!==e){let a=!1;i&&this.navChange.emit({activeId:this.activeId,nextId:e,preventDefault:()=>{a=!0}}),a||(this.activeId=e,this.activeIdChange.emit(e),this._notifyItemChanged(e))}}_notifyItemChanged(e){this.navItemChange$.next(this._getItemById(e))}_getItemById(e){return this.items&&this.items.find(i=>i.id===e)||null}static{this.\u0275fac=function(i){return new(i||t)(de("role"))}}static{this.\u0275dir=A({type:t,selectors:[["","ngbNav",""]],contentQueries:function(i,a,c){if(i&1&&Oe(c,ge,4)(c,he,5),i&2){let p;te(p=ie())&&(a.items=p),te(p=ie())&&(a.links=p)}},hostAttrs:[1,"nav"],hostVars:4,hostBindings:function(i,a){i&1&&L("keydown.arrowLeft",function(p){return a.onKeyDown(p)})("keydown.arrowRight",function(p){return a.onKeyDown(p)})("keydown.arrowDown",function(p){return a.onKeyDown(p)})("keydown.arrowUp",function(p){return a.onKeyDown(p)})("keydown.Home",function(p){return a.onKeyDown(p)})("keydown.End",function(p){return a.onKeyDown(p)})("focusout",function(p){return a.onFocusout(p)}),i&2&&(X("aria-orientation",a.orientation==="vertical"&&a.roles==="tablist"?"vertical":void 0)("role",a.role?a.role:a.roles?"tablist":void 0),z("flex-column",a.orientation==="vertical"))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],features:[Qe]})}}return t})(),he=(()=>{class t{constructor(e){this.role=e,this.navItem=x(ge),this.nav=x(oe),this.nativeElement=x(Z).nativeElement}get tabindex(){return this.nav.keyboard===!1?this.navItem.disabled?-1:void 0:this.nav._navigatingWithKeyboard||this.navItem.disabled||!this.navItem.active?-1:void 0}static{this.\u0275fac=function(i){return new(i||t)(de("role"))}}static{this.\u0275dir=A({type:t,selectors:[["","ngbNavLink",""]],hostAttrs:[1,"nav-link"],hostVars:12,hostBindings:function(i,a){i&2&&(E("id",a.navItem.domId),X("role",a.role?a.role:a.nav.roles?"tab":void 0)("tabindex",a.tabindex)("aria-controls",a.navItem.isPanelInDom()?a.navItem.panelDomId:null)("aria-selected",a.navItem.active)("aria-disabled",a.navItem.disabled),z("nav-item",a.navItem.isNgContainer())("active",a.navItem.active)("disabled",a.navItem.disabled))}})}}return t})(),St=(()=>{class t extends he{static{this.\u0275fac=(()=>{let e;return function(a){return(e||(e=Ke(t)))(a||t)}})()}static{this.\u0275dir=A({type:t,selectors:[["button","ngbNavLink",""]],hostAttrs:["type","button"],hostVars:1,hostBindings:function(i,a){i&1&&L("click",function(){return a.nav.click(a.navItem)}),i&2&&E("disabled",a.navItem.disabled)},features:[Ze]})}}return t})();var Ft=({classList:t})=>(t.remove("show"),()=>t.remove("active")),Rt=(t,n)=>{n&&bt(t),t.classList.add("show")},xt=(()=>{class t{constructor(){this.nativeElement=x(Z).nativeElement}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=A({type:t,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(i,a){i&2&&(E("id",a.item.panelDomId),X("role",a.role?a.role:a.nav.roles?"tabpanel":void 0)("aria-labelledby",a.item.domId),z("fade",a.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"}})}}return t})(),Tt=(()=>{class t{constructor(){this._cd=x(De),this._ngZone=x(Ye),this._activePane=null}isPanelTransitioning(e){return this._activePane?.item===e}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(He(this.nav.destroyRef),$e(this._activePane?.item||null),Ge(),je(1)).subscribe(e=>{let i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Ae(this._ngZone,this._activePane.nativeElement,Ft,i).subscribe(()=>{let a=this._activePane?.item;this._activePane=this._getPaneForItem(e),this._cd.markForCheck(),this._activePane&&(this._activePane.nativeElement.classList.add("active"),Ae(this._ngZone,this._activePane.nativeElement,Rt,i).subscribe(()=>{e&&(e.shown.emit(),this.nav.shown.emit(e.id))})),a&&(a.hidden.emit(),this.nav.hidden.emit(a.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.nativeElement.classList.add("show","active")}_getPaneForItem(e){return this._panes&&this._panes.find(i=>i.item===e)||null}_getActivePane(){return this._panes&&this._panes.find(e=>e.item.active)||null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=y({type:t,selectors:[["","ngbNavOutlet",""]],viewQuery:function(i,a){if(i&1&&tt(xt,5),i&2){let c;te(c=ie())&&(a._panes=c)}},hostAttrs:[1,"tab-content"],inputs:{paneRole:"paneRole",nav:[0,"ngbNavOutlet","nav"]},attrs:Ot,decls:2,vars:0,consts:[["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,a){i&1&&U(0,At,1,1,null,null,pe),i&2&&V(a.nav.items)},dependencies:[xt,mt],encapsulation:2,changeDetection:0})}}return t})();var Mt=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=ce({type:t})}static{this.\u0275inj=le({})}}return t})();var R=class{static filter=n=>n.playtime_2weeks!=null&&n.playtime_2weeks>0};var W=class t{transform(n){let e=n/60;return e>=10?Math.round(e):Math.round(e*10)/10}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=J({name:"minutesToHours",type:t,pure:!0})};function Wt(t,n){if(t&1&&(f(0,"div",0),P(1,"canvas",2),u()),t&2){let e=g();o(),b("data",e.pieChartData)("type",e.pieChartType)("options",e.pieChartOptions)}}function Gt(t,n){t&1&&(f(0,"div",1)(1,"p"),r(2),l(3,"transloco"),u()()),t&2&&(o(2),v(m(3,1,"common.noData")))}var ve=class t{constructor(n){this.translationService=n}data;pieChartData={labels:[],datasets:[{data:[]}]};pieChartType="pie";pieChartOptions={plugins:{legend:{display:!1}},responsive:!1};ngOnInit(){let n=this.translationService.translate("profile.chartsTab.allTime.playTimeHours");setTimeout(()=>{this.data.length>0&&(this.pieChartData={labels:this.data.map(e=>Array.isArray(e.name)?e.name:typeof e.name=="string"&&e.name.includes(",")?e.name.split(",").map(i=>i.trim()):e.name),datasets:[{data:this.data.map(e=>e.value),label:n}]})},1e3)}static \u0275fac=function(e){return new(e||t)(h(F))};static \u0275cmp=y({type:t,selectors:[["app-all-time"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"col-12","chart"],[1,"no-games-message"],["baseChart","",3,"data","type","options"]],template:function(e,i){e&1&&_(0,Wt,2,3,"div",0)(1,Gt,4,3,"div",1),e&2&&C(i.data&&i.data.length?0:1)},dependencies:[ue,S,w],encapsulation:2})};function jt(t,n){if(t&1&&(f(0,"div",0),P(1,"canvas",2),u()),t&2){let e=g();o(),b("data",e.pieChartData)("type",e.pieChartType)("options",e.pieChartOptions)}}function $t(t,n){t&1&&(f(0,"div",1)(1,"p"),r(2),l(3,"transloco"),u()()),t&2&&(o(2),v(m(3,1,"common.noData")))}var be=class t{constructor(n){this.translationService=n}data;pieChartData={labels:[],datasets:[{data:[]}]};pieChartType="pie";pieChartOptions={plugins:{legend:{display:!1}},responsive:!1};ngOnInit(){let n=this.translationService.translate("profile.chartsTab.lastTwoWeeks.playTimeHours");setTimeout(()=>{this.data.length>0&&(this.pieChartData={labels:this.data.map(e=>Array.isArray(e.name)?e.name:typeof e.name=="string"&&e.name.includes(",")?e.name.split(",").map(i=>i.trim()):e.name),datasets:[{data:this.data.map(e=>e.value),label:n}]})},1e3)}get hasDataWithValue(){return this.data&&this.data.length>0&&this.data.some(n=>n.value>0)}static \u0275fac=function(e){return new(e||t)(h(F))};static \u0275cmp=y({type:t,selectors:[["app-last-two-weeks"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"col-12","chart"],[1,"no-games-message"],["baseChart","",3,"data","type","options"]],template:function(e,i){e&1&&_(0,jt,2,3,"div",0)(1,$t,4,3,"div",1),e&2&&C(i.hasDataWithValue?0:1)},dependencies:[ue,S,w],encapsulation:2})};var M=class t{allGamesSignal=me([]);ownedGamesSignal=me([]);playerSummarySignal=me({});constructor(){}static \u0275fac=function(e){return new(e||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ut=(t,n)=>n.name;function Vt(t,n){if(t&1&&(d(0,"span",9),r(1),s()),t&2){let e=n.$implicit;o(),v(e)}}function zt(t,n){if(t&1&&(d(0,"span",11),r(1),l(2,"transloco"),s()),t&2){let e=g(3);o(),N(" ",m(2,1,e.translationPrefix+"wildcard"))}}function Yt(t,n){if(t&1&&(d(0,"div",7)(1,"div",8),U(2,Vt,2,1,"span",9,pe),s(),d(4,"h2",10),r(5),_(6,zt,3,3,"span",11),s(),d(7,"p",12),r(8),l(9,"transloco"),d(10,"strong"),r(11),s()(),d(12,"div",13)(13,"p")(14,"span",14),r(15),l(16,"transloco"),s(),r(17),s(),d(18,"p")(19,"span",14),r(20),l(21,"transloco"),s(),r(22),s(),d(23,"p",15),r(24),s()()()),t&2){let e=n.$implicit,i=g(2);z("wildcard",e.isWildcard),o(2),V(e.genres),o(3),ne(" #",e.id,". ",e.name," "),o(),C(e.isWildcard?6:-1),o(2),v(m(9,12,i.translationPrefix+"forfansOf")),o(3),v(e.referenceGame),o(4),v(m(16,14,i.translationPrefix+"pitch")),o(2),N(" ",e.pitch),o(3),v(m(21,16,i.translationPrefix+"why")),o(2),N(" ",e.why),o(2),v(e.score)}}function Qt(t,n){if(t&1&&(d(0,"div",3),U(1,Yt,25,18,"div",6,Ut),s()),t&2){let e=g();o(),V(e.TMW2Play)}}function Kt(t,n){if(t&1&&(d(0,"div",4)(1,"h2"),r(2),l(3,"transloco"),s(),d(4,"p"),r(5),l(6,"transloco"),s(),d(7,"p"),r(8),l(9,"transloco"),s(),d(10,"p"),r(11),l(12,"transloco"),s()()),t&2){let e=g();o(2),v(m(3,4,e.translationPrefix+"noRecommendationsTitle")),o(3),v(m(6,6,e.translationPrefix+"noRecommendationsLabel1")),o(3),v(m(9,8,e.translationPrefix+"noRecommendationsLabel2")),o(3),v(m(12,10,e.translationPrefix+"noRecommendationsLabel3"))}}function Jt(t,n){t&1&&(d(0,"div",5),B(1,"div",16),s())}var ye=class t{constructor(n,e){this.sharedService=n;this.signalService=e;this.signToEffects()}TMW2Play=[];loading=!1;translationPrefix="profile.chartsTab.tellMeWhatToPlay.";signToEffects(){D(()=>{let n=this.signalService.allGamesSignal().filter(R.filter).map(i=>i.name),e=this.signalService.allGamesSignal().map(i=>i.name);(n.length>0||e.length>0)&&(this.loading=!0,this.sharedService.tellMeWhatToPlay(n,e).pipe(Q(1)).subscribe(i=>{this.TMW2Play=i,this.loading=!1}))})}static \u0275fac=function(e){return new(e||t)(h(I),h(M))};static \u0275cmp=y({type:t,selectors:[["app-tell-me-what-to-play"]],decls:10,vars:4,consts:[[1,"recommendations-container"],[1,"hype-header"],[1,"glitch-text"],[1,"game-grid"],[1,"no-recommendations"],[1,"loading-spinner"],[1,"game-card",3,"wildcard"],[1,"game-card"],[1,"genre-tags"],[1,"tag"],[1,"game-title"],[1,"wildcard-badge"],[1,"reference-game"],[1,"game-details"],[1,"label"],[1,"score"],["role","status",1,"spinner-border"]],template:function(e,i){e&1&&(d(0,"div",0)(1,"h1",1),r(2," \u{1F3AE} "),d(3,"span",2),r(4),l(5,"transloco"),s(),r(6," \u{1F47E} "),s(),_(7,Qt,3,0,"div",3)(8,Kt,13,12,"div",4)(9,Jt,2,0,"div",5),s()),e&2&&(o(4),v(m(5,2,i.translationPrefix+"gameRecommendations")),o(3),C(!i.loading&&i.TMW2Play&&i.TMW2Play.length>0?7:i.loading?9:8))},dependencies:[S,w],styles:[".hype-header[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;margin-bottom:1rem;color:#fff;text-shadow:0 0 10px #00f7ff,0 0 20px #00f7ff}.glitch-text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_glitch 1s infinite}@keyframes _ngcontent-%COMP%_glitch{0%{text-shadow:0 0 10px #f50a0a}50%{text-shadow:0 0 15px #0f0cd3,0 0 20px #00f7ff}to{text-shadow:0 0 10px #00ff00}}.game-grid[_ngcontent-%COMP%]{display:grid;gap:1rem;padding-left:1rem;padding-right:1rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}.game-card[_ngcontent-%COMP%]{background:#14141ecc;border-radius:12px;padding:1.5rem;border-left:4px solid #00f7ff;transition:transform .3s}.game-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #00f7ff4d}.game-card.wildcard[_ngcontent-%COMP%]{border-left-color:#ff00f7;background:#1e0a1ecc}.genre-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}.tag[_ngcontent-%COMP%]{background:#00f7ff;color:#000;padding:.3rem .6rem;border-radius:20px;font-size:.8rem;font-weight:700}.game-title[_ngcontent-%COMP%]{color:#fff;margin:.5rem 0;font-size:1.4rem}.game-title[_ngcontent-%COMP%]   .wildcard-badge[_ngcontent-%COMP%]{background:#ff00f7;color:#fff;padding:.2rem .6rem;border-radius:20px;font-size:.8rem;margin-left:.5rem}.reference-game[_ngcontent-%COMP%]{color:#aaa;font-style:italic;margin-bottom:1rem}.game-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#ddd}.game-details[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#00f7ff;font-weight:700}.game-details[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{font-weight:700;color:#ff00f7;margin-top:.8rem}.no-recommendations[_ngcontent-%COMP%]{padding:1rem}"]})};function qt(t,n){if(t&1&&B(0,"div",10),t&2){let e=g();E("innerHTML",e.humiliationHtml,Je)}}function Zt(t,n){if(t&1&&(d(0,"div",11)(1,"h2"),r(2),l(3,"transloco"),s()()),t&2){let e=g();o(2),v(m(3,1,e.translationPrefix+"humilationFailed"))}}function Xt(t,n){t&1&&(d(0,"div",12),B(1,"div",13),s())}var _e=class t{constructor(n,e,i,a){this.sharedService=n;this.signalService=e;this.sanitizer=i;this.minutesToHoursPipe=a;this.signToEffects()}humiliationText="Humuliation in progress...";humiliationHtml="";loading=!1;translationPrefix="profile.chartsTab.humiliateMyLibrary.";signToEffects(){D(()=>{let n=this.signalService.allGamesSignal().filter(R.filter),e=this.signalService.allGamesSignal();(n.length>0||e.length>0)&&(this.loading=!0,this.sharedService.humiliateMyLibrary({lastTwoWeeks:n.map(i=>({game:i.name,time:this.minutesToHoursPipe.transform(i.playtime_2weeks)})),allGames:e.map(i=>({game:i.name,time:this.minutesToHoursPipe.transform(i.playtime_forever)}))}).pipe(Q(1)).subscribe(i=>{this.humiliationText=i,this.humiliationHtml=this.sanitizer.bypassSecurityTrustHtml(this.markdownToHtml(i)),this.loading=!1}))})}markdownToHtml(n){return n.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<strong>$1</strong>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^/,"<p>").replace(/$/,"</p>")}static \u0275fac=function(e){return new(e||t)(h(I),h(M),h(ft),h(W))};static \u0275cmp=y({type:t,selectors:[["app-humiliate-my-library"]],decls:21,vars:1,consts:[[1,"recommendations-container"],[1,"hype-header"],[1,"letter",2,"--letter-index","0"],[1,"letter",2,"--letter-index","1"],[1,"letter",2,"--letter-index","2"],[1,"letter",2,"--letter-index","3"],[1,"letter",2,"--letter-index","4"],[1,"letter",2,"--letter-index","5"],[1,"letter",2,"--letter-index","6"],[1,"letter",2,"--letter-index","7"],[1,"humiliation-text",3,"innerHTML"],[1,"no-recommendations"],[1,"loading-spinner"],["role","status",1,"spinner-border"]],template:function(e,i){e&1&&(d(0,"div",0)(1,"h1",1)(2,"span",2),r(3,"F"),s(),d(4,"span",3),r(5,"A"),s(),d(6,"span",4),r(7,"T"),s(),d(8,"span",5),r(9,"A"),s(),d(10,"span",6),r(11,"L"),s(),d(12,"span",7),r(13,"I"),s(),d(14,"span",8),r(15,"T"),s(),d(16,"span",9),r(17,"Y"),s()(),_(18,qt,1,1,"div",10)(19,Zt,4,3,"div",11)(20,Xt,2,0,"div",12),s()),e&2&&(o(18),C(!i.loading&&i.humiliationText&&i.humiliationText.length>0?18:i.loading?20:19))},dependencies:[S,w],styles:["@keyframes _ngcontent-%COMP%_melt{0%{transform:translateY(0) skewY(0);text-shadow:0 0 20px #00f7ff,0 0 40px #00f7ff;filter:blur(0px) brightness(1.2)}25%{transform:translateY(8px) skewY(2deg);text-shadow:0 5px 15px rgba(0,247,255,.8),0 10px 30px rgba(0,247,255,.6),0 15px 40px rgba(0,247,255,.4);filter:blur(.5px) brightness(1.1)}50%{transform:translateY(20px) skewY(4deg);text-shadow:0 10px 20px rgba(0,247,255,.8),0 20px 40px rgba(0,247,255,.6),0 30px 60px rgba(0,247,255,.4),0 40px 80px rgba(0,247,255,.2);filter:blur(1.5px) brightness(1);opacity:.9}75%{transform:translateY(35px) skewY(6deg);text-shadow:0 15px 25px rgba(0,247,255,.7),0 28px 50px rgba(0,247,255,.5),0 42px 80px rgba(0,247,255,.3),0 56px 100px rgba(0,247,255,.1);filter:blur(2.5px) brightness(.9);opacity:.7}to{transform:translateY(50px) skewY(8deg);text-shadow:0 20px 30px rgba(0,247,255,.6),0 35px 60px rgba(0,247,255,.4),0 50px 90px rgba(0,247,255,.2),0 70px 120px rgba(0,247,255,.08);filter:blur(4px) brightness(.8);opacity:.4}}.hype-header[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;margin-bottom:1rem;color:#00f7ff;text-shadow:0 0 20px #00f7ff,0 0 40px #00f7ff;font-weight:700;display:inline-block;width:100%}.letter[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_melt 5s ease-in infinite;animation-delay:calc(var(--letter-index) * .15s)}pre[_ngcontent-%COMP%]{background:#ff6b6b0d;border-left:4px solid #00f7ff;border-radius:4px;padding:1.5rem;color:#e0e0e0;font-family:Courier New,monospace;font-size:.95rem;line-height:1.6;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word;max-height:500px;overflow-y:auto;margin:0;box-shadow:inset 0 2px 8px #0003}pre[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}pre[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ff6b6b1a;border-radius:4px}pre[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#00f7ff;border-radius:4px}pre[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#00f7ff}.humiliation-text[_ngcontent-%COMP%]{background:#ff6b6b0d;border-left:4px solid #00f7ff;border-radius:4px;padding:1.5rem;color:#e0e0e0;font-size:.95rem;line-height:1.8;max-height:500px;overflow-y:auto;box-shadow:inset 0 2px 8px #0003}.humiliation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0}.humiliation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin-top:0}.humiliation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.humiliation-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#ff6b6b;font-weight:700}.humiliation-text[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{color:#00f7ff;font-style:italic}.humiliation-text[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.humiliation-text[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ff6b6b1a;border-radius:4px}.humiliation-text[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#00f7ff;border-radius:4px}.humiliation-text[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#00f7ff}.no-recommendations[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:200px;padding:2rem;text-align:center}.no-recommendations[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#00f7ff;margin:0;letter-spacing:1px}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:250px}.loading-spinner[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{border-width:3px;border-color:#ff6b6b4d;border-right-color:#00f7ff;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function ei(t,n){if(t&1&&P(0,"app-last-two-weeks",8),t&2){let e=g();b("data",e.twoWeeksData)}}function ti(t,n){if(t&1&&P(0,"app-all-time",8),t&2){let e=g();b("data",e.allTimeData)}}function ii(t,n){t&1&&(Ne(0),P(1,"app-tell-me-what-to-play"),Ie())}function ni(t,n){if(t&1&&_(0,ii,2,0,"ng-container"),t&2){let e=g();C(e.tmw2PlayLoaded?0:-1)}}function ai(t,n){t&1&&(Ne(0),P(1,"app-humiliate-my-library"),Ie())}function oi(t,n){if(t&1&&_(0,ai,2,0,"ng-container"),t&2){let e=g();C(e.humiliateMyLibLoaded?0:-1)}}var Ce=class t{constructor(n,e){this.minutesToHoursPipe=n;this.signalService=e;this.signToChartEffects()}view=[700,400];active=1;twoWeeksData=[];allTimeData=[];gradient=!0;showLegend=!0;showLabels=!0;isDoughnut=!1;tmw2PlayLoaded=!1;humiliateMyLibLoaded=!1;translationPrefix="profile.chartsTab.";colorScheme={domain:["#5AA454","#A10A28","#C7B42C","#AAAAAA"]};signToChartEffects(){this.signTwoWeeksDataEffect(),this.signAllTimeDataEffect()}signAllTimeDataEffect(){D(()=>{this.allTimeData=this.signalService.allGamesSignal().filter(n=>n.playtime_forever!=null&&n.playtime_forever>0).map(n=>({name:n.name,value:this.minutesToHoursPipe.transform(n.playtime_forever)}))})}signTwoWeeksDataEffect(){D(()=>{this.twoWeeksData=this.signalService.allGamesSignal().filter(R.filter).map(n=>({name:n.name,value:this.minutesToHoursPipe.transform(n.playtime_2weeks)}))})}static \u0275fac=function(e){return new(e||t)(h(W),h(M))};static \u0275cmp=y({type:t,selectors:[["app-charts-tab"]],features:[fe([W])],decls:27,vars:32,consts:[["nav","ngbNav"],["data-bs-theme","dark",1,"gradient-bg-dark","profile-header"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId","destroyOnHide"],[3,"ngbNavItem","destroyOnHide","title"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavLink","",3,"click"],[1,"mt-2",3,"ngbNavOutlet"],[3,"data"]],template:function(e,i){if(e&1){let a=ee();f(0,"div",1)(1,"ul",2,0),ot("activeIdChange",function(p){return G(a),at(i.active,p)||(i.active=p),j(p)}),f(3,"li",3),l(4,"transloco"),f(5,"button",4),r(6),l(7,"transloco"),u(),$(8,ei,1,1,"ng-template",5),u(),f(9,"li",3),l(10,"transloco"),f(11,"button",4),r(12),l(13,"transloco"),u(),$(14,ti,1,1,"ng-template",5),u(),f(15,"li",3),l(16,"transloco"),f(17,"button",6),L("click",function(){return G(a),j(i.tmw2PlayLoaded=!0)}),r(18,"TMW2Play"),u(),$(19,ni,1,1,"ng-template",5),u(),f(20,"li",3),l(21,"transloco"),f(22,"button",6),L("click",function(){return G(a),j(i.humiliateMyLibLoaded=!0)}),r(23),l(24,"transloco"),u(),$(25,oi,1,1,"ng-template",5),u()(),P(26,"div",7),u()}if(e&2){let a=it(2);o(),nt("activeId",i.active),b("destroyOnHide",!1),o(2),b("ngbNavItem",1)("destroyOnHide",!1)("title",m(4,18,i.translationPrefix+"lastTwoWeeksLabel")),o(3),v(m(7,20,i.translationPrefix+"lastTwoWeeksLabel")),o(3),b("ngbNavItem",2)("destroyOnHide",!1)("title",m(10,22,i.translationPrefix+"allTimeLabel")),o(3),v(m(13,24,i.translationPrefix+"allTimeLabel")),o(3),b("ngbNavItem",3)("destroyOnHide",!1)("title",m(16,26,i.translationPrefix+"tellMeWhatToPlayLabel")),o(5),b("ngbNavItem",4)("destroyOnHide",!1)("title",m(21,28,i.translationPrefix+"humiliateMyLibrary.description")),o(3),v(m(24,30,i.translationPrefix+"humiliateMyLibrary.title")),o(3),b("ngbNavOutlet",a)}},dependencies:[Mt,Le,oe,ge,wt,St,he,Tt,Ct,be,ve,ye,S,_e,w],styles:["[_nghost-%COMP%]     .chart{height:calc(40vh - 50px)}[_nghost-%COMP%]     .chart canvas{margin:auto}[_nghost-%COMP%]     .no-games-message{padding:1rem}"]})};var xe=class t{constructor(n){this.translationService=n}transform(n){let e=this.translationService.translate("common.ago"),i=this.translationService.translate("common.justNow"),a=this.translationService.translate("common.neverPlayed");if(n<=0)return a;let c=Math.floor((Date.now()-n*1e3)/1e3),p={[this.translationService.translate("common.year")]:31536e3,[this.translationService.translate("common.month")]:2592e3,[this.translationService.translate("common.week")]:604800,[this.translationService.translate("common.day")]:86400,[this.translationService.translate("common.hour")]:3600,[this.translationService.translate("common.minute")]:60};for(let[q,It]of Object.entries(p)){let Te=Math.floor(c/It);if(Te>=1){let Me=q;return Te>1&&(q===this.translationService.translate("common.month")?Me=this.translationService.translate("common.months"):Me=`${q}s`),`${Te} ${Me} ${e}`}}return i}static \u0275fac=function(e){return new(e||t)(h(F,16))};static \u0275pipe=J({name:"lastPlayed",type:t,pure:!0})};var Pe=class t{constructor(n){this.translationService=n}transform(n){let e=this.translationService.translate("common.hour")+"s",i=this.translationService.translate("common.minute")+"s",a=Math.floor(n/60),c=n%60;return`${a} ${e} ${c} ${i}`}static \u0275fac=function(e){return new(e||t)(h(F,16))};static \u0275pipe=J({name:"playTime",type:t,pure:!0})};var ri=(t,n)=>({"pe-0 d-md-block":t,"d-none":n}),si=(t,n)=>n.appid;function li(t,n){if(t&1&&(f(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),P(4,"img",5),f(5,"div",6)(6,"h6",7),r(7),u(),f(8,"div",8)(9,"div"),r(10),l(11,"transloco"),l(12,"lastPlayed"),u(),f(13,"div"),r(14),l(15,"transloco"),l(16,"playTime"),u()()()()()()()),t&2){let e=n.$implicit,i=n.$index,a=g();b("ngClass",st(16,ri,(i+1)%3===0,(i+1)%3===0)),o(4),b("src",a.getGameImageUrl(e),K)("alt",e.name),o(3),v(e.name),o(3),ne("",m(11,8,a.translationPrefix+"lastPlayed")," ",m(12,10,e.rtime_last_played)),o(4),ne("",m(15,12,a.translationPrefix+"totalPlaytime")," ",m(16,14,e.playtime_forever))}}var we=class t{ownedGames=[];translationPrefix="profile.ownedGames.";getGameImageUrl(n){return`https://media.steampowered.com/steamcommunity/public/images/apps/${n.appid}/${n.img_icon_url}.jpg`}constructor(n){D(()=>{this.ownedGames=n.ownedGamesSignal()})}static \u0275fac=function(e){return new(e||t)(h(M))};static \u0275cmp=y({type:t,selectors:[["app-owned-games"]],decls:3,vars:0,consts:[[1,"row","owned-games-container"],[1,"col-md-4","col-sm-12","mb-2","card-parent",3,"ngClass"],[1,"game-card","card","gradient-bg-dark","border-0"],[1,"card-body","p-2"],[1,"d-flex"],["width","64","height","64",1,"rounded",3,"src","alt"],[1,"flex-grow-1","ms-3"],[1,"mb-1","text-truncate"],[1,"small"]],template:function(e,i){e&1&&(f(0,"div",0),U(1,li,17,19,"div",1,si),u()),e&2&&(o(),V(i.ownedGames))},dependencies:[S,ct,lt,xe,Pe,w],styles:[".card-parent[_ngcontent-%COMP%]{height:90px}.game-card[_ngcontent-%COMP%]{transition:transform .2s,box-shadow .2s;border:1px solid #2c3e50!important}.game-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #0000004d;border-color:#66c0f4!important}.loading-games[_ngcontent-%COMP%]{opacity:.7}.steam-btn[_ngcontent-%COMP%]{background-color:#5c7e10;font-weight:700}.steam-btn[_ngcontent-%COMP%]:hover{background-color:#6c8e20}"]})};function mi(t,n){if(t&1&&(Xe(0),B(1,"img",10),l(2,"transloco"),l(3,"lowercase"),et()),t&2){let e=g();o(),E("alt",ke(m(2,3,e.translationPrefix+"countryFlag")))("src","https://steamcommunity-a.akamaihd.net/public/images/countryflags/"+m(3,5,e.playerSummary.loccountrycode)+".gif",K)}}var Se=class t{switchNeverPlayed=!1;translationPrefix="profile.summaryHeader.";playerSummary;hideNeverPlayed=new k;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-summary-header"]],inputs:{playerSummary:"playerSummary"},outputs:{hideNeverPlayed:"hideNeverPlayed"},decls:19,vars:15,consts:[[1,"profile-header","gradient-bg-dark"],[1,"col","col-md-9","col-sm-12","text-center","py-3","m-auto"],[1,"row","align-items-center","m-2"],[1,"col","col-md-3","col-sm-6","text-center"],["priority","",1,"profile-pic","img-fluid","rounded-circle","mb-3",3,"src","alt"],[1,"col","col-md-9","col-sm-12"],[1,"display-5"],[1,"fs-4"],[1,"mb-3"],["target","_blank",1,"btn","btn-primary","btn-sm",3,"href"],["priority","",1,"country-flag",3,"src","alt"]],template:function(e,i){e&1&&(d(0,"div",0)(1,"div",1)(2,"h6"),r(3),l(4,"transloco"),s()(),d(5,"div",2)(6,"div",3),B(7,"img",4),l(8,"transloco"),s(),d(9,"div",5)(10,"h2",6),r(11),d(12,"span",7),r(13),s(),_(14,mi,4,7,"ng-container"),s(),d(15,"div",8)(16,"a",9),r(17),l(18,"transloco"),s()()()()()),e&2&&(o(3),v(m(4,9,i.translationPrefix+"welcomeMessage")),o(4),E("alt",ke(m(8,11,i.translationPrefix+"profilePicture")))("src",i.playerSummary.avatarfull,K),o(4),N(" ",i.playerSummary.personaname," "),o(2),N(" (",i.playerSummary.realname||i.playerSummary.personaname,")"),o(),C(i.playerSummary.loccountrycode?14:-1),o(2),E("href",i.playerSummary.profileurl,K),o(),N(" ",m(18,13,i.translationPrefix+"viewSteamProfile")," "))},dependencies:[ht,S,dt,w],styles:[".profile-pic[_ngcontent-%COMP%]{border:5px solid #66c0f4;box-shadow:0 0 15px #66c0f480}.country-flag[_ngcontent-%COMP%]{width:30px;height:20px;border-radius:2px;margin:.5rem .5rem 0}.status-icon[_ngcontent-%COMP%]{font-size:1.2rem;vertical-align:middle}"]})};function di(t,n){if(t&1){let e=ee();f(0,"div",0)(1,"div",3)(2,"app-summary-header",4),L("hideNeverPlayed",function(a){G(e);let c=g();return j(c.onHideNeverPlayed(a))}),u(),P(3,"app-charts-tab",5),u(),f(4,"div",3),P(5,"app-owned-games",6),u()()}if(t&2){let e=g();o(2),b("playerSummary",e.signalService.playerSummarySignal())}}function ci(t,n){t&1&&(f(0,"div",1),P(1,"div",7),u())}function pi(t,n){t&1&&(f(0,"div",2),r(1),l(2,"transloco"),u()),t&2&&(o(),N(" ",m(2,1,"profile.notPublic"),`
`))}var Nt=class t{constructor(n,e,i,a){this.ac=n;this.router=e;this.sharedService=i;this.signalService=a}steamUser=null;loading=!0;ngAfterViewInit(){this.steamUser=this.ac.snapshot.paramMap.get("steamUser");let n=this.ac.snapshot.queryParamMap.get("type");if(!this.steamUser){this.router.navigate(["Home"]);return}n==="id"?this.loadProfileById(this.steamUser):this.loadProfile(this.steamUser)}loadProfileById(n){this.loading=!0,this.loadProfileData(n)}loadProfile(n){this.loading=!0,this.sharedService.getUserId(n).pipe(Q(1)).subscribe(e=>{this.loadProfileData(e)})}loadProfileData(n){return We([this.sharedService.playerSummary(n),this.sharedService.steamOwnedGames(n)]).subscribe(([e,i])=>{this.updateSignals(e,i),this.loading=!1})}updateSignals(n,e){this.signalService.allGamesSignal.set(e),this.signalService.playerSummarySignal.set(n),this.signalService.ownedGamesSignal.set(e)}onHideNeverPlayed(n){let e=n?this.signalService.allGamesSignal().filter(i=>i.playtime_forever>0):this.signalService.allGamesSignal();this.signalService.ownedGamesSignal.set(e)}static \u0275fac=function(e){return new(e||t)(h(ut),h(gt),h(I),h(M))};static \u0275cmp=y({type:t,selectors:[["app-profile"]],features:[fe([I])],decls:3,vars:1,consts:[[1,"py-2","tmw2p-container"],[1,"loading-spinner"],[1,"m-2","py-2","alert","alert-warning","text-center","tmw2p-container"],[1,"row"],[1,"col-md-6","col-sm-12","mb-3",3,"hideNeverPlayed","playerSummary"],[1,"col-md-6","col-sm-12","mb-3"],[1,"col-md-12","col-sm-12"],["role","status",1,"spinner-border"]],template:function(e,i){if(e&1&&_(0,di,6,1,"div",0)(1,ci,2,0,"div",1)(2,pi,3,3,"div",2),e&2){let a;C(((a=i.signalService.playerSummarySignal())==null?null:a.communityvisibilitystate)===3&&!i.loading?0:i.loading?1:2)}},dependencies:[Se,we,Ce,S,w],styles:[".summary[_ngcontent-%COMP%]{margin-bottom:1.5rem}.tmw2p-container[_ngcontent-%COMP%]{overflow-y:overlay;overflow-x:hidden}"]})};export{Nt as ProfileComponent};
